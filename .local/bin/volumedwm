#!/bin/sh


case $BUTTON in
        1) /usr/bin/pactl set-sink-mute 0 toggle ;;
        2) "st" -e "vim" "$0";;
esac


ifg=^c#fb5607^
tfg=^d^

volstat="$(pactl list sinks)"

echo "$volstat" | grep -q "Mute: yes" && echo "$ifg󰖁^d^" && exit

vol="$(echo "$volstat" | grep '[0-9]\+%' | sed "s,.* \([0-9]\+\)%.*,\1,;1q")"

icon=""

if [ "$vol" -gt "70" ]; then
  icon=󰕾
elif [ "$vol" -lt "30" ]; then
  icon=󰖀
else
  icon=󰖀
fi

echo "$ifg$icon $vol%$tfg"
